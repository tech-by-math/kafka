<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e67e22;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad4" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Kafka Failure Models &amp; Recovery
  </text>
  
  <!-- Failure Types -->
  <g transform="translate(50, 80)">
    <rect x="0" y="0" width="160" height="140" fill="url(#grad1)" rx="10"/>
    <text x="80" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      Failure Types
    </text>
    <text x="15" y="50" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Broker Crash
    </text>
    <text x="15" y="70" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Network Partition
    </text>
    <text x="15" y="90" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Disk Failure
    </text>
    <text x="15" y="110" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Memory Exhaustion
    </text>
    <text x="15" y="130" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Corrupt Messages
    </text>
  </g>
  
  <!-- Detection Mechanisms -->
  <g transform="translate(240, 80)">
    <rect x="0" y="0" width="160" height="140" fill="url(#grad2)" rx="10"/>
    <text x="80" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      Detection
    </text>
    <text x="15" y="50" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Heartbeat Monitoring
    </text>
    <text x="15" y="70" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Session Timeouts
    </text>
    <text x="15" y="90" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Health Checks
    </text>
    <text x="15" y="110" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Metric Thresholds
    </text>
    <text x="15" y="130" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Consensus Violation
    </text>
  </g>
  
  <!-- Recovery Strategies -->
  <g transform="translate(430, 80)">
    <rect x="0" y="0" width="160" height="140" fill="url(#grad3)" rx="10"/>
    <text x="80" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      Recovery
    </text>
    <text x="15" y="50" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Leader Election
    </text>
    <text x="15" y="70" font-family="Arial, sans-serif" font-size="11" fill="white">
      • ISR Rebuild
    </text>
    <text x="15" y="90" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Replica Sync
    </text>
    <text x="15" y="110" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Consumer Rebalance
    </text>
    <text x="15" y="130" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Data Restoration
    </text>
  </g>
  
  <!-- Resilience Patterns -->
  <g transform="translate(620, 80)">
    <rect x="0" y="0" width="160" height="140" fill="url(#grad4)" rx="10"/>
    <text x="80" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      Resilience
    </text>
    <text x="15" y="50" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Circuit Breaker
    </text>
    <text x="15" y="70" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Retry Policies
    </text>
    <text x="15" y="90" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Bulkhead Pattern
    </text>
    <text x="15" y="110" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Rate Limiting
    </text>
    <text x="15" y="130" font-family="Arial, sans-serif" font-size="11" fill="white">
      • Graceful Degradation
    </text>
  </g>
  
  <!-- Mathematical Models -->
  <g transform="translate(100, 280)">
    <rect x="0" y="0" width="600" height="140" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2" rx="10"/>
    <text x="300" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Failure Mathematical Models
    </text>
    
    <!-- MTBF -->
    <text x="50" y="55" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e74c3c">
      MTBF (Mean Time Between Failures):
    </text>
    <text x="280" y="55" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      MTBF = 1 / λ (failure rate)
    </text>
    
    <!-- Availability -->
    <text x="50" y="80" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f39c12">
      Availability:
    </text>
    <text x="140" y="80" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      A = MTBF / (MTBF + MTTR) where MTTR = Mean Time To Repair
    </text>
    
    <!-- Exponential Failure Distribution -->
    <text x="50" y="105" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#27ae60">
      Exponential Distribution:
    </text>
    <text x="210" y="105" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      F(t) = 1 - e^(-λt) (probability of failure by time t)
    </text>
    
    <!-- Recovery Time -->
    <text x="50" y="130" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#3498db">
      Recovery Time:
    </text>
    <text x="160" y="130" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      T_recovery = T_detection + T_election + T_sync
    </text>
  </g>
  
  <!-- Failure Scenario Timeline -->
  <g transform="translate(50, 450)">
    <rect x="0" y="0" width="700" height="130" fill="#ffffff" stroke="#bdc3c7" stroke-width="2" rx="10"/>
    <text x="350" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Broker Failure &amp; Recovery Timeline
    </text>
    
    <!-- Timeline Steps -->
    <circle cx="80" cy="70" r="18" fill="#e74c3c"/>
    <text x="80" y="75" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="white">
      FAIL
    </text>
    <text x="80" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2c3e50">
      t=0s
    </text>
    <text x="80" y="115" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">
      Broker Dies
    </text>
    
    <circle cx="200" cy="70" r="18" fill="#f39c12"/>
    <text x="200" y="75" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="white">
      DETECT
    </text>
    <text x="200" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2c3e50">
      t=6s
    </text>
    <text x="200" y="115" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">
      Timeout
    </text>
    
    <circle cx="320" cy="70" r="18" fill="#9b59b6"/>
    <text x="320" y="75" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="white">
      ELECT
    </text>
    <text x="320" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2c3e50">
      t=8s
    </text>
    <text x="320" y="115" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">
      New Leader
    </text>
    
    <circle cx="440" cy="70" r="18" fill="#3498db"/>
    <text x="440" y="75" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="white">
      SYNC
    </text>
    <text x="440" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2c3e50">
      t=12s
    </text>
    <text x="440" y="115" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">
      ISR Rebuild
    </text>
    
    <circle cx="560" cy="70" r="18" fill="#27ae60"/>
    <text x="560" y="75" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="white">
      HEAL
    </text>
    <text x="560" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2c3e50">
      t=15s
    </text>
    <text x="560" y="115" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">
      Fully Recovered
    </text>
    
    <circle cx="620" cy="70" r="18" fill="#1abc9c"/>
    <text x="620" y="75" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="white">
      NORM
    </text>
    <text x="620" y="100" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2c3e50">
      t=16s
    </text>
    <text x="620" y="115" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#2c3e50">
      Normal Ops
    </text>
    
    <!-- Timeline line -->
    <line x1="80" y1="50" x2="620" y2="50" stroke="#bdc3c7" stroke-width="3"/>
    
    <!-- Arrows -->
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d"/>
      </marker>
    </defs>
    
    <line x1="98" y1="70" x2="182" y2="70" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="218" y1="70" x2="302" y2="70" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="338" y1="70" x2="422" y2="70" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="458" y1="70" x2="542" y2="70" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="578" y1="70" x2="602" y2="70" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
  </g>
  
  <!-- Connecting arrows from top sections -->
  <line x1="130" y1="220" x2="200" y2="280" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="320" y1="220" x2="300" y2="280" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="510" y1="220" x2="400" y2="280" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="220" x2="500" y2="280" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/>
</svg>